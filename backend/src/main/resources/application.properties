# ============================================================================
# Filmer Application Configuration
# Spring Boot Application Properties
# ============================================================================
# SECURITY NOTICE: This file uses Environment Variables for all sensitive data
# NO CREDENTIALS should ever be hardcoded in this file
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION (Security Standard 7 - Zero Hardcoded Credentials)
# ============================================================================
# CRITICAL: All database credentials MUST be provided via environment variables
# Required Environment Variables:
#   - DB_URL: JDBC connection URL (e.g., jdbc:postgresql://localhost:5432/filmer)
#   - DB_USER: Database username
#   - DB_PASSWORD: Database password
# ============================================================================

spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration (HikariCP - Spring Boot Default)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ============================================================================
# JPA / HIBERNATE CONFIGURATION
# ============================================================================

# DDL Auto Mode
# - none: Do nothing (schema managed by schema.sql)
# - validate: Validate schema, make no changes
# - update: Update schema if needed (use with caution)
# - create: Create schema, destroying previous data
# - create-drop: Create schema, drop on shutdown
spring.jpa.hibernate.ddl-auto=none

# Show SQL in console (disable in production)
spring.jpa.show-sql=false

# Hibernate Dialect for PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Format SQL output (for debugging)
spring.jpa.properties.hibernate.format_sql=true

# Use JDBC batch processing for better performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Application Name
spring.application.name=filmer

# Server Port
server.port=8080

# Context Path (optional - uncomment to add /api prefix to all endpoints)
# server.servlet.context-path=/api

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Root logging level
logging.level.root=INFO

# Spring Framework logging
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG

# Hibernate logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Application logging (adjust package name when created)
logging.level.com.filmer=DEBUG

# Log file configuration (optional)
# logging.file.name=logs/filmer.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# ============================================================================
# SECURITY CONFIGURATION (for future implementation)
# ============================================================================

# JWT Secret (MUST use environment variable in production)
# jwt.secret=${JWT_SECRET}
# jwt.expiration=86400000

# ============================================================================
# CORS CONFIGURATION (for Angular frontend)
# ============================================================================

# Allowed origins (adjust for production)
# cors.allowed-origins=http://localhost:4200

# ============================================================================
# ACTUATOR CONFIGURATION (for monitoring - optional)
# ============================================================================

# Enable actuator endpoints
# management.endpoints.web.exposure.include=health,info,metrics
# management.endpoint.health.show-details=when-authorized

# ============================================================================
# NOTES FOR DEVELOPERS
# ============================================================================
# 1. NEVER commit credentials to version control
# 2. Set environment variables in your IDE or terminal before running
# 3. For IntelliJ: Run > Edit Configurations > Environment Variables
# 4. For terminal: export DB_URL=jdbc:postgresql://localhost:5432/filmer
# 5. Create application-local.properties for local overrides (add to .gitignore)
# ============================================================================
